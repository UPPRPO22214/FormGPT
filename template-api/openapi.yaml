openapi: 3.0.3
info:
  title: FormGPT API
  version: "0.1.0"
  description: API –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –æ–ø—Ä–æ—Å–æ–≤ —Å GPT –ø–æ–º–æ—â–Ω–∏–∫–æ–º

servers:
  - url: http://survey-service:8080

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
        email:
          type: string
        createdAt:
          type: string
          format: date-time

    CreateSurveyRequest:
      type: object
      required:
        - title
      properties:
        title:
          type: string
        description:
          type: string
        questions:
          type: array
          items:
            $ref: "#/components/schemas/CreateQuestionRequest"

    SurveyResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
        description:
          type: string
        ownerId:
          type: string
          format: uuid
        questions:
          type: array
          items:
            $ref: "#/components/schemas/QuestionResponse"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateQuestionRequest:
      type: object
      required:
        - title
        - type
      properties:
        id:
          type: integer
          nullable: true
          description: |
            ID —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
            –ï—Å–ª–∏ null –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç - —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å.
        title:
          type: string
        type:
          type: string
          enum: [single-choice, multiple-choice, text, scale-1-10]
        options:
          type: array
          items:
            type: string

    QuestionResponse:
      type: object
      properties:
        id:
          type: integer
        surveyId:
          type: integer
        title:
          type: string
        type:
          type: string
          enum: [single-choice, multiple-choice, text, scale-1-10]
        options:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Answer:
      type: object
      properties:
        questionId:
          type: integer
        value:
          type: string

    SurveyWithAnswersResponse:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        description:
          type: string
        ownerId:
          type: string
          format: uuid
        hasUserResponded:
          type: boolean
          description: –û—Ç–≤–µ—Ç–∏–ª –ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —ç—Ç–æ—Ç –æ–ø—Ä–æ—Å
        userRespondedAt:
          type: string
          format: date-time
          nullable: true
        questions:
          type: array
          items:
            $ref: "#/components/schemas/QuestionWithAnswerResponse"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    QuestionWithAnswerResponse:
      type: object
      properties:
        id:
          type: integer
        surveyId:
          type: integer
        title:
          type: string
        type:
          type: string
          enum: [single-choice, multiple-choice, text, scale-1-10]
        options:
          type: array
          items:
            type: string
        userAnswer:
          type: string
          description: –û—Ç–≤–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    SurveyAnswer:
      type: object
      properties:
        answers:
          type: array
          items:
            $ref: "#/components/schemas/Answer"

    GPTSurveyCreateRequest:
      type: object
      required:
        - description
        - questionCount
      properties:
        description:
          type: string
          description: |
            –û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–º—ã –æ–ø—Ä–æ—Å–∞. –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ GPT –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤.
            –ü—Ä–∏–º–µ—Ä—ã:
            - "–û–ø—Ä–æ—Å –æ–± —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤"
            - "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
          example: "–û–ø—Ä–æ—Å –æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É–¥–∞–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã"
        targetAudience:
          type: string
          description: |
            –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –æ–ø—Ä–æ—Å–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
            –ü–æ–º–æ–≥–∞–µ—Ç GPT –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤.
            –ü—Ä–∏–º–µ—Ä—ã: "—Å—Ç—É–¥–µ–Ω—Ç—ã", "—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ IT-–∫–æ–º–ø–∞–Ω–∏–π", "—Ä–æ–¥–∏—Ç–µ–ª–∏ –¥–µ—Ç–µ–π 3-6 –ª–µ—Ç"
          example: "–æ—Ñ–∏—Å–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏"
          nullable: true
        questionCount:
          type: integer
          description: |
            –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–º –æ–ø—Ä–æ—Å–µ.
            –ú–∏–Ω–∏–º—É–º 1, –º–∞–∫—Å–∏–º—É–º 20.
          minimum: 1
          maximum: 20
          example: 5

    GPTAddQuestionRequest:
      type: object
      properties:
        topic:
          type: string
          description: |
            –¢–µ–º–∞—Ç–∏–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
            –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ç–µ–º–∞ –æ–ø—Ä–æ—Å–∞.
          example: "–ë–∞–ª–∞–Ω—Å —Ä–∞–±–æ—Ç—ã –∏ –ª–∏—á–Ω–æ–π –∂–∏–∑–Ω–∏"
          nullable: true
        targetAudience:
          type: string
          description: |
            –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –¥–ª—è –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
            –ü—Ä–∏–º–µ—Ä—ã: "–º–µ–Ω–µ–¥–∂–µ—Ä—ã", "—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏", "–Ω–æ–≤–∏—á–∫–∏ –≤ –∫–æ–º–∞–Ω–¥–µ"
          example: "—É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∏"
          nullable: true

    GPTQuestionImproveRequest:
      type: object
      properties:
        prompt:
          type: string
          description: |
            –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è GPT –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –≤–æ–ø—Ä–æ—Å–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
            –ü—Ä–∏–º–µ—Ä—ã:
            - "–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–º –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤"
            - "–î–æ–±–∞–≤—å –±–æ–ª—å—à–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞"
            - "–ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –≤ –±–æ–ª–µ–µ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ"
          example: "–°–¥–µ–ª–∞–π –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞ –±–æ–ª–µ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏"
          nullable: true

    GPTAnalysis:
      type: object
      properties:
        text:
          type: string
        score:
          type: string
          enum: [good, average, bad]

    ErrorResponse:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
          example: "2025-12-07T22:49:18.402695"
        status:
          type: integer
          example: 400
        error:
          type: string
          example: "Bad Request"
        message:
          type: string
          example: "Invalid request parameters"
        path:
          type: string
          example: "/api/gpt/surveys/create"

security:
  - bearerAuth: []

paths:
  /health:
    get:
      summary: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok

  /auth/register:
    post:
      summary: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string

  /auth/login:
    post:
      summary: –õ–æ–≥–∏–Ω
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string

  /users/me:
    get:
      summary: –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      security:
        - bearerAuth: []
      responses:
        '200':
          description: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"

  /surveys:
    get:
      summary: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –æ–ø—Ä–æ—Å–æ–≤
      security:
        - bearerAuth: []
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ –æ–ø—Ä–æ—Å–æ–≤
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SurveyResponse"

    post:
      summary: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –æ–ø—Ä–æ—Å
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateSurveyRequest"
      responses:
        '201':
          description: –û–ø—Ä–æ—Å —Å–æ–∑–¥–∞–Ω
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SurveyResponse"

  /surveys/{surveyId}:
    get:
      summary: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–ø—Ä–æ—Å
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: surveyId
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: –û–ø—Ä–æ—Å
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SurveyWithAnswersResponse"

    put:
      summary: –û–±–Ω–æ–≤–∏—Ç—å –æ–ø—Ä–æ—Å
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: surveyId
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateSurveyRequest"
      responses:
        '200':
          description: –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–ø—Ä–æ—Å
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SurveyResponse"

    delete:
      summary: –£–¥–∞–ª–∏—Ç—å –æ–ø—Ä–æ—Å
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: surveyId
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—ë–Ω

  /surveys/{surveyId}/answers:
    post:
      summary: –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ–ø—Ä–æ—Å
      description: |
        –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ–ø—Ä–æ—Å. 
        –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –æ—Ç–≤–µ—á–∞–ª –Ω–∞ —ç—Ç–æ—Ç –æ–ø—Ä–æ—Å - –µ–≥–æ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—Ç–≤–µ—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è.
        
        üîç **–ü—Ä–æ–≤–µ—Ä–∫–∏:**
        - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
        - –î–ª—è single-choice –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–Ω–∏–º –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
        - –î–ª—è scale-1-10 –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º –æ—Ç 1 –¥–æ 10
        - –î–ª—è text –æ—Ç–≤–µ—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 1000 —Å–∏–º–≤–æ–ª–æ–≤
        
        ‚úÖ **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
        - –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å—Ç–∞—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–æ–≤—ã–º–∏
        - –≤–æ–ø—Ä–æ—Å—ã –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å (value = null)
        - –î–ª—è multiple-choice –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —á–µ—Ä–µ–∑ `;`
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: surveyId
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SurveyAnswer"
      responses:
        '200':
          description: –û—Ç–≤–µ—Ç—ã —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "success"

  /gpt/surveys/create:
    post:
      tags:
        - GPT
      summary: –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –æ–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ GPT
      description: |
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π –æ–ø—Ä–æ—Å —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é —Ç–µ–º—É.
        
        –ü—Ä–æ—Ü–µ—Å—Å:
        1. GPT –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–º—ã
        2. –°–æ–∑–¥–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–ø—Ä–æ—Å–∞
        3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
        4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é –æ–ø—Ä–æ—Å
        
        ‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
        - –ú–∞–∫—Å–∏–º—É–º 20 –≤–æ–ø—Ä–æ—Å–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
        - –ú–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 30 —Å–µ–∫—É–Ω–¥
        - –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GPTSurveyCreateRequest"
            examples:
              basicExample:
                summary: –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
                value:
                  description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å —É—Å–ª–æ–≤–∏—è–º–∏ —Ä–∞–±–æ—Ç—ã –≤ –æ—Ñ–∏—Å–µ"
                  questionCount: 5
              detailedExample:
                summary: –ü—Ä–∏–º–µ—Ä —Å —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π
                value:
                  description: "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞"
                  targetAudience: "–º–æ–ª–æ–¥–µ–∂—å 18-25 –ª–µ—Ç"
                  questionCount: 8
      responses:
        '200':
          description: |
            –£—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–ø—Ä–æ—Å.
            –û–ø—Ä–æ—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏–ª–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SurveyResponse"
              examples:
                successExample:
                  summary: –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
                  value:
                    id: 42
                    title: "–û–ø—Ä–æ—Å –æ–± —É—Å–ª–æ–≤–∏—è—Ö —Ä–∞–±–æ—Ç—ã –≤ –æ—Ñ–∏—Å–µ"
                    description: "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ GPT"
                    ownerId: "e4947280-7093-4d5f-8e2e-da25f818bbf8"
                    questions:
                      - id: 101
                        surveyId: 42
                        title: "–ù–∞—Å–∫–æ–ª—å–∫–æ –≤–∞–º –∫–æ–º—Ñ–æ—Ä—Ç–Ω–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –æ—Ñ–∏—Å–µ?"
                        type: "single-choice"
                        options: ["–û—á–µ–Ω—å –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ", "–ö–æ–º—Ñ–æ—Ä—Ç–Ω–æ", "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ", "–î–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ", "–û—á–µ–Ω—å –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ"]
                        createdAt: "2025-12-07T22:49:18.402695"
                        updatedAt: "2025-12-07T22:49:18.402695"
                      - id: 102
                        surveyId: 42
                        title: "–ö–∞–∫–∏–µ –∏–∑ —ç—Ç–∏—Ö —É–¥–æ–±—Å—Ç–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –≤–∞—à–µ–º –æ—Ñ–∏—Å–µ?"
                        type: "multiple-choice"
                        options: ["–ö–æ—Ñ–µ-–º–∞—à–∏–Ω–∞", "–§—Ä—É–∫—Ç—ã", "–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞", "–ú–µ—Å—Ç–∞ –¥–ª—è –æ—Ç–¥—ã—Ö–∞", "–ü–∞—Ä–∫–æ–≤–∫–∞"]
                        createdAt: "2025-12-07T22:49:18.402695"
                        updatedAt: "2025-12-07T22:49:18.402695"
                    createdAt: "2025-12-07T22:49:18.402695"
                    updatedAt: "2025-12-07T22:49:18.402695"
        '400':
          description: |
            –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.
            - description –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
            - questionCount –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 20
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '401':
          description: –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ GPT —Å–µ—Ä–≤–∏—Å—É
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /gpt/surveys/{surveyId}/questions:
    post:
      tags:
        - GPT
      summary: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–ø—Ä–æ—Å —á–µ—Ä–µ–∑ GPT
      description: |
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –æ–ø—Ä–æ—Å.
        
        –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
        - –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ —Ç–µ–º–∞ (topic), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–º–∞ –æ–ø—Ä–æ—Å–∞
        - –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å –≤–æ–ø—Ä–æ—Å–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
        - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ —Ç–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤ (single-choice, multiple-choice, text, scale)
        - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º –æ–ø—Ä–æ—Å–∞
        
        ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞:** –Ω—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –æ–ø—Ä–æ—Å –Ω–æ–≤—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: surveyId
          required: true
          description: ID —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –æ–ø—Ä–æ—Å–∞
          schema:
            type: integer
            example: 42
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GPTAddQuestionRequest"
            examples:
              withTopic:
                summary: –° —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–µ–º—ã
                value:
                  topic: "–†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ"
                  targetAudience: "—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏"
              withoutTopic:
                summary: –ë–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ç–µ–º—ã
                value:
                  targetAudience: "–º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø—Ä–æ–µ–∫—Ç–æ–≤"
      responses:
        '201':
          description: |
            –í–æ–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –æ–ø—Ä–æ—Å.
            –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å —Å –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω—ã–º ID.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuestionResponse"
              examples:
                createdQuestion:
                  summary: –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
                  value:
                    id: 150
                    surveyId: 42
                    title: "–ù–∞—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –≤ –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ?"
                    type: "single-choice"
                    options:
                      - "–û—á–µ–Ω—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ"
                      - "–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ"
                      - "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ"
                      - "–ú–∞–ª–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ"
                      - "–°–æ–≤—Å–µ–º –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ"
                    createdAt: "2025-12-07T22:49:18.402695"
                    updatedAt: "2025-12-07T22:49:18.402695"
        '400':
          description: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '401':
          description: –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '403':
          description: –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '404':
          description: –û–ø—Ä–æ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–∞
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /gpt/questions/{questionId}/edit:
    put:
      tags:
        - GPT
      summary: –£–ª—É—á—à–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ GPT
      description: |
        –£–ª—É—á—à–∞–µ—Ç —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É, –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ —Å –ø–æ–º–æ—â—å—é GPT.
        
        –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
        - –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É –≤–æ–ø—Ä–æ—Å–∞ (—Å–¥–µ–ª–∞—Ç—å —è—Å–Ω–µ–µ/–ø—Ä–æ—â–µ)
        - –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (–¥–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å)
        - –¢–∏–ø –≤–æ–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å single-choice –≤ multiple-choice)
        
        üí° **–°–æ–≤–µ—Ç:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–µ `prompt` –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ —É–ª—É—á—à–µ–Ω–∏—é.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: questionId
          required: true
          description: ID –≤–æ–ø—Ä–æ—Å–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
          schema:
            type: integer
            example: 123
      requestBody:
        required: false
        description: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è GPT (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GPTQuestionImproveRequest"
            examples:
              withPrompt:
                summary: –° –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
                value:
                  prompt: "–°–¥–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–º –¥–ª—è –ª—é–¥–µ–π –±–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è"
              withoutPrompt:
                summary: –ë–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (GPT —É–ª—É—á—à–∏—Ç –Ω–∞ —Å–≤–æ–µ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ)
                value: {}
      responses:
        '200':
          description: |
            –í–æ–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ —É–ª—É—á—à–µ–Ω.
            –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å.
            
            ‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuestionResponse"
              examples:
                improvedQuestion:
                  summary: –ü—Ä–∏–º–µ—Ä —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
                  value:
                    id: 123
                    surveyId: 42
                    title: "–ù–∞—Å–∫–æ–ª—å–∫–æ —É–¥–æ–±–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –Ω–µ–æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?"
                    type: "single-choice"
                    options:
                      - "–û—á–µ–Ω—å —É–¥–æ–±–µ–Ω, –≤—Å–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ"
                      - "–í —Ü–µ–ª–æ–º —É–¥–æ–±–µ–Ω, –Ω–æ –µ—Å—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏"
                      - "–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å"
                      - "–°–ª–æ–∂–Ω–æ–≤–∞—Ç, –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è"
                      - "–°–æ–≤—Å–µ–º –Ω–µ—É–¥–æ–±–µ–Ω, –≤—Å–µ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ"
                    createdAt: "2025-12-07T22:49:18.402695"
                    updatedAt: "2025-12-07T23:15:30.123456"
        '400':
          description: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '401':
          description: –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '403':
          description: –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '404':
          description: –í–æ–ø—Ä–æ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–∞
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /gpt/surveys/{surveyId}/analyze:
    post:
      summary: –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –æ–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ GPT
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: surveyId
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –æ—Ü–µ–Ω–∫–∞ –æ–ø—Ä–æ—Å–∞
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GPTAnalysis"

  /surveys/{surveyId}/stats:
    get:
      summary: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –æ–ø—Ä–æ—Å—É
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: surveyId
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø—Ä–æ—Å–∞
          content:
            application/json:
              schema:
                type: object
                properties:
                  respondents:
                    type: integer
                  answersDistribution:
                    type: object
